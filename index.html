<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pani Poori Billing</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#0f766e">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100 flex justify-center items-center min-h-screen">

<div class="w-full max-w-sm bg-white rounded-3xl shadow-xl p-6 space-y-5">

  <h1 class="text-center text-xl font-bold text-emerald-600">
    Pani Poori Billing
  </h1>

  <!-- PRICE -->
  <div class="text-center">
    <span class="text-sm text-gray-500">Price per plate</span>
    <div class="text-3xl font-black text-emerald-700">
      ₹<span id="price">30</span>
    </div>
  </div>

  <!-- COUNTER -->
  <div class="flex justify-between items-center">
    <button onclick="removePlate()" class="bg-rose-500 text-white px-6 py-3 rounded-xl">−</button>
    <div class="text-3xl font-black" id="qty">0</div>
    <button onclick="addPlate()" class="bg-emerald-600 text-white px-6 py-3 rounded-xl">+</button>
  </div>

  <!-- TOTAL -->
  <div class="text-center bg-slate-900 text-white rounded-2xl py-5">
    <div class="text-xs uppercase">Payable</div>
    <div class="text-4xl font-black">₹<span id="total">0</span></div>
  </div>

  <!-- ACTIONS -->
  <button onclick="sendWhatsApp()" class="w-full bg-green-500 text-white py-4 rounded-xl font-bold">
    Send WhatsApp Bill
  </button>

  <button onclick="adminLogin()" class="w-full bg-gray-200 py-3 rounded-xl">
    Admin Settings
  </button>

</div>

<script>
let qty = 0;
let price = localStorage.getItem("price") || 30;
let billNo = localStorage.getItem("billNo") || 1;

document.getElementById("price").innerText = price;

function update() {
  document.getElementById("qty").innerText = qty;
  document.getElementById("total").innerText = qty * price;
}

function addPlate() {
  qty++;
  update();
}

function removePlate() {
  if (qty > 0) qty--;
  update();
}

function sendWhatsApp() {
  if (qty === 0) {
    alert("Add plates first");
    return;
  }

  const msg =
`PANI POORI BILL
Bill No: ${billNo}
Plates: ${qty}
Price: ₹${price}
Total: ₹${qty * price}

Thank you!`;

  const url = "https://wa.me/?text=" + encodeURIComponent(msg);
  window.open(url);

  billNo++;
  localStorage.setItem("billNo", billNo);
  qty = 0;
  update();
}

function adminLogin() {
  const pass = prompt("Enter admin password");
  if (pass === "admin123") {
    const newPrice = prompt("Enter new price");
    if (newPrice) {
      price = newPrice;
      localStorage.setItem("price", price);
      document.getElementById("price").innerText = price;
      update();
    }
  } else {
    alert("Wrong password");
  }
}

update();
</script>

<!-- Service Worker -->
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./service-worker.js");
}
</script>

</body>
</html>